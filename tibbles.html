<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>13 Tibbles | R for Data Science (2e)</title>
<meta name="author" content="Hadley Wickham and Garrett Grolemund">
<meta name="description" content="13.1 Introduction Throughout this book we work with “tibbles” instead of R’s traditional data.frame. Tibbles are data frames, but they tweak some older behaviours to make life a little easier. R...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="13 Tibbles | R for Data Science (2e)">
<meta property="og:type" content="book">
<meta property="og:url" content="https://r4ds.had.co.nz/tibbles.html">
<meta property="og:image" content="https://r4ds.had.co.nz//cover.png">
<meta property="og:description" content="13.1 Introduction Throughout this book we work with “tibbles” instead of R’s traditional data.frame. Tibbles are data frames, but they tweak some older behaviours to make life a little easier. R...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="13 Tibbles | R for Data Science (2e)">
<meta name="twitter:site" content="@hadley">
<meta name="twitter:description" content="13.1 Introduction Throughout this book we work with “tibbles” instead of R’s traditional data.frame. Tibbles are data frames, but they tweak some older behaviours to make life a little easier. R...">
<meta name="twitter:image" content="https://r4ds.had.co.nz//cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Data Science (2e)</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="preface-to-the-second-edition.html">Preface to the second edition</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Whole game</li>
<li><a class="" href="explore-intro.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="data-visualisation.html"><span class="header-section-number">3</span> Data visualisation</a></li>
<li><a class="" href="workflow-basics.html"><span class="header-section-number">4</span> Workflow: basics</a></li>
<li><a class="" href="data-transform.html"><span class="header-section-number">5</span> Data transformation</a></li>
<li><a class="" href="data-tidy.html"><span class="header-section-number">6</span> Data tidying</a></li>
<li><a class="" href="workflow-pipes.html"><span class="header-section-number">7</span> Workflow: pipes</a></li>
<li><a class="" href="data-import.html"><span class="header-section-number">8</span> Data import</a></li>
<li><a class="" href="workflow-scripts.html"><span class="header-section-number">9</span> Workflow: scripts</a></li>
<li><a class="" href="exploratory-data-analysis.html"><span class="header-section-number">10</span> Exploratory Data Analysis</a></li>
<li><a class="" href="workflow-projects.html"><span class="header-section-number">11</span> Workflow: projects</a></li>
<li class="book-part">Transform</li>
<li><a class="" href="data-types-intro.html"><span class="header-section-number">12</span> Introduction</a></li>
<li><a class="active" href="tibbles.html"><span class="header-section-number">13</span> Tibbles</a></li>
<li><a class="" href="relational-data.html"><span class="header-section-number">14</span> Relational data</a></li>
<li><a class="" href="vector-tools.html"><span class="header-section-number">15</span> Vector tools</a></li>
<li><a class="" href="logicals-numbers.html"><span class="header-section-number">16</span> Logicals and numbers</a></li>
<li><a class="" href="missing-values.html"><span class="header-section-number">17</span> Missing values</a></li>
<li><a class="" href="strings.html"><span class="header-section-number">18</span> Strings</a></li>
<li><a class="" href="regular-expressions.html"><span class="header-section-number">19</span> Regular expressions</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">20</span> Factors</a></li>
<li><a class="" href="dates-and-times.html"><span class="header-section-number">21</span> Dates and times</a></li>
<li><a class="" href="column-wise.html"><span class="header-section-number">22</span> Column-wise operations</a></li>
<li class="book-part">Import</li>
<li><a class="" href="import-intro.html"><span class="header-section-number">23</span> Introduction</a></li>
<li><a class="" href="import-rectangular.html"><span class="header-section-number">24</span> Rectangular data</a></li>
<li><a class="" href="import-spreadsheets.html"><span class="header-section-number">25</span> Spreadsheets</a></li>
<li><a class="" href="import-databases.html"><span class="header-section-number">26</span> Databases</a></li>
<li><a class="" href="import-webscrape.html"><span class="header-section-number">27</span> Web scraping</a></li>
<li><a class="" href="import-other.html"><span class="header-section-number">28</span> Other types of data</a></li>
<li class="book-part">Tidy</li>
<li><a class="" href="wrangle-intro.html"><span class="header-section-number">29</span> Introduction</a></li>
<li><a class="" href="list-columns.html"><span class="header-section-number">30</span> List columns</a></li>
<li><a class="" href="rectangle-data.html"><span class="header-section-number">31</span> Data rectangling</a></li>
<li class="book-part">Program</li>
<li><a class="" href="program-intro.html"><span class="header-section-number">32</span> Introduction</a></li>
<li><a class="" href="pipes.html"><span class="header-section-number">33</span> Pipes</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">34</span> Functions</a></li>
<li><a class="" href="vectors.html"><span class="header-section-number">35</span> Vectors</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">36</span> Iteration</a></li>
<li><a class="" href="programming-with-strings.html"><span class="header-section-number">37</span> Programming with strings</a></li>
<li class="book-part">Communicate</li>
<li><a class="" href="communicate-intro.html"><span class="header-section-number">38</span> Introduction</a></li>
<li><a class="" href="r-markdown.html"><span class="header-section-number">39</span> R Markdown</a></li>
<li><a class="" href="graphics-for-communication.html"><span class="header-section-number">40</span> Graphics for communication</a></li>
<li><a class="" href="r-markdown-formats.html"><span class="header-section-number">41</span> R Markdown formats</a></li>
<li><a class="" href="r-markdown-workflow.html"><span class="header-section-number">42</span> R Markdown workflow</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r4ds">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tibbles" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Tibbles<a class="anchor" aria-label="anchor" href="#tibbles"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-6" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-6"><i class="fas fa-link"></i></a>
</h2>
<p>Throughout this book we work with “tibbles” instead of R’s traditional <code>data.frame</code>.
Tibbles <em>are</em> data frames, but they tweak some older behaviours to make life a little easier.
R is an old language, and some things that were useful 10 or 20 years ago now get in your way.
It’s difficult to change base R without breaking existing code, so most innovation occurs in packages.
Here we will describe the <strong>tibble</strong> package, which provides opinionated data frames that make working in the tidyverse a little easier.
In most places, I’ll use the term tibble and data frame interchangeably; when I want to draw particular attention to R’s built-in data frame, I’ll call them <code>data.frame</code>s.</p>
<p>If this chapter leaves you wanting to learn more about tibbles, you might enjoy <code>vignette("tibble")</code>.</p>
<div id="prerequisites-6" class="section level3" number="13.1.1">
<h3>
<span class="header-section-number">13.1.1</span> Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites-6"><i class="fas fa-link"></i></a>
</h3>
<p>In this chapter we’ll explore the <strong>tibble</strong> package, part of the core tidyverse.</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="creating-tibbles" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Creating tibbles<a class="anchor" aria-label="anchor" href="#creating-tibbles"><i class="fas fa-link"></i></a>
</h2>
<p>Almost all of the functions that you’ll use in this book produce tibbles, as tibbles are one of the unifying features of the tidyverse.
Most other R packages use regular data frames, so you might want to coerce a data frame to a tibble.
You can do that with <code>as_tibble()</code>:</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">as_tibble</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>
<span class="co">#&gt; &lt;U+2029&gt;[90m# A tibble: 32 x 11&lt;U+2029&gt;[39m</span>NA<span class="co">#&gt;     &lt;U+2029&gt;[1mmpg&lt;U+2029&gt;[22m   &lt;U+2029&gt;[1mcyl&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1mdisp&lt;U+2029&gt;[22m    &lt;U+2029&gt;[1mhp&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1mdrat&lt;U+2029&gt;[22m    &lt;U+2029&gt;[1mwt&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1mqsec&lt;U+2029&gt;[22m    &lt;U+2029&gt;[1mvs&lt;U+2029&gt;[22m    &lt;U+2029&gt;[1mam&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1mgear&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1mcarb&lt;U+2029&gt;[22m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m1&lt;U+2029&gt;[39m  21       6   160   110  3.9   2.62  16.5     0     1     4     4</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m2&lt;U+2029&gt;[39m  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m3&lt;U+2029&gt;[39m  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m4&lt;U+2029&gt;[39m  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m5&lt;U+2029&gt;[39m  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m6&lt;U+2029&gt;[39m  18.1     6   225   105  2.76  3.46  20.2     1     0     3     1</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m# ... with 26 more rows&lt;U+2029&gt;[39m</span>NA</code></pre></div>
<p>You can create a new tibble from individual vectors with <code>tibble()</code>.
<code>tibble()</code> will automatically recycle inputs of length 1, and allows you to refer to variables that you just created, as shown below.</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>
  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, 
  y <span class="op">=</span> <span class="fl">1</span>, 
  z <span class="op">=</span> <span class="va">x</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="va">y</span>
<span class="op">)</span>
<span class="co">#&gt; &lt;U+2029&gt;[90m# A tibble: 5 x 3&lt;U+2029&gt;[39m</span>NA<span class="co">#&gt;       &lt;U+2029&gt;[1mx&lt;U+2029&gt;[22m     &lt;U+2029&gt;[1my&lt;U+2029&gt;[22m     &lt;U+2029&gt;[1mz&lt;U+2029&gt;[22m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;int&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m1&lt;U+2029&gt;[39m     1     1     2</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m2&lt;U+2029&gt;[39m     2     1     5</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m3&lt;U+2029&gt;[39m     3     1    10</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m4&lt;U+2029&gt;[39m     4     1    17</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m5&lt;U+2029&gt;[39m     5     1    26</span>NA</code></pre></div>
<p>If you’re already familiar with <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code>, note that <code>tibble()</code> does much less: it never changes the type of the inputs (e.g. it never converts strings to factors!), it never changes the names of variables, and it never creates row names.</p>
<p>It’s possible for a tibble to have column names that are not valid R variable names, aka <strong>non-syntactic</strong> names.
For example, they might not start with a letter, or they might contain unusual characters like a space.
To refer to these variables, you need to surround them with backticks, <code>`</code>:</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tb</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>
  `:)` <span class="op">=</span> <span class="st">"smile"</span>, 
  ` ` <span class="op">=</span> <span class="st">"space"</span>,
  `2000` <span class="op">=</span> <span class="st">"number"</span>
<span class="op">)</span>
<span class="va">tb</span>
<span class="co">#&gt; &lt;U+2029&gt;[90m# A tibble: 1 x 3&lt;U+2029&gt;[39m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[1m`:)`&lt;U+2029&gt;[22m  &lt;U+2029&gt;[1m` `&lt;U+2029&gt;[22m   &lt;U+2029&gt;[1m`2000`&lt;U+2029&gt;[22m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;chr&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;chr&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;chr&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m1&lt;U+2029&gt;[39m smile space number</span>NA</code></pre></div>
<p>You’ll also need the backticks when working with these variables in other packages, like ggplot2, dplyr, and tidyr.</p>
<p>Another way to create a tibble is with <code>tribble()</code>, short for <strong>tr</strong>ansposed tibble.
<code>tribble()</code> is customised for data entry in code: column headings are defined by formulas (i.e. they start with <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code>), and entries are separated by commas.
This makes it possible to lay out small amounts of data in easy to read form.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tribble</span><span class="op">(</span>
  <span class="op">~</span><span class="va">x</span>, <span class="op">~</span><span class="va">y</span>, <span class="op">~</span><span class="va">z</span>,
  <span class="co">#--|--|----</span>
  <span class="st">"a"</span>, <span class="fl">2</span>, <span class="fl">3.6</span>,
  <span class="st">"b"</span>, <span class="fl">1</span>, <span class="fl">8.5</span>
<span class="op">)</span>
<span class="co">#&gt; &lt;U+2029&gt;[90m# A tibble: 2 x 3&lt;U+2029&gt;[39m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[1mx&lt;U+2029&gt;[22m         &lt;U+2029&gt;[1my&lt;U+2029&gt;[22m     &lt;U+2029&gt;[1mz&lt;U+2029&gt;[22m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;chr&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m1&lt;U+2029&gt;[39m a         2   3.6</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m2&lt;U+2029&gt;[39m b         1   8.5</span>NA</code></pre></div>
<p>I often add a comment (the line starting with <code>#</code>), to make it really clear where the header is.</p>
</div>
<div id="tibbles-vs.-data.frame" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> Tibbles vs. data.frame<a class="anchor" aria-label="anchor" href="#tibbles-vs.-data.frame"><i class="fas fa-link"></i></a>
</h2>
<p>There are two main differences in the usage of a tibble vs. a classic <code>data.frame</code>: printing and subsetting.</p>
<div id="printing" class="section level3" number="13.3.1">
<h3>
<span class="header-section-number">13.3.1</span> Printing<a class="anchor" aria-label="anchor" href="#printing"><i class="fas fa-link"></i></a>
</h3>
<p>Tibbles have a refined print method that shows only the first 10 rows, and all the columns that fit on screen.
This makes it much easier to work with large data.
In addition to its name, each column reports its type, a nice feature borrowed from <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>:</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>
  a <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/now.html">now</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span> <span class="op">*</span> <span class="fl">86400</span>,
  b <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/now.html">today</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span> <span class="op">*</span> <span class="fl">30</span>,
  c <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e3</span>,
  d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span>,
  e <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fl">1e3</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; &lt;U+2029&gt;[90m# A tibble: 1,000 x 5&lt;U+2029&gt;[39m</span>NA<span class="co">#&gt;   &lt;U+2029&gt;[1ma&lt;U+2029&gt;[22m                   &lt;U+2029&gt;[1mb&lt;U+2029&gt;[22m              &lt;U+2029&gt;[1mc&lt;U+2029&gt;[22m     &lt;U+2029&gt;[1md&lt;U+2029&gt;[22m &lt;U+2029&gt;[1me&lt;U+2029&gt;[22m    </span>NA<span class="co">#&gt;   &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dttm&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m              &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;date&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m     &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;int&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;dbl&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m &lt;U+2029&gt;[3m&lt;U+2029&gt;[90m&lt;chr&gt;&lt;U+2029&gt;[39m&lt;U+2029&gt;[23m</span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m1&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m04:31:34&lt;U+2029&gt;[39m 2021-09-10     1 0.368 n    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m2&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m22:36:44&lt;U+2029&gt;[39m 2021-09-15     2 0.612 l    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m3&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m17:00:23&lt;U+2029&gt;[39m 2021-09-25     3 0.415 p    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m4&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m06:21:40&lt;U+2029&gt;[39m 2021-09-24     4 0.212 m    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m5&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m02:45:57&lt;U+2029&gt;[39m 2021-09-21     5 0.733 i    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m6&lt;U+2029&gt;[39m 2021-09-03 &lt;U+2029&gt;[90m13:46:54&lt;U+2029&gt;[39m 2021-09-17     6 0.460 n    </span>NA<span class="co">#&gt; &lt;U+2029&gt;[90m# ... with 994 more rows&lt;U+2029&gt;[39m</span>NA</code></pre></div>
<p>Tibbles are designed so that you don’t accidentally overwhelm your console when you print large data frames.
But sometimes you need more output than the default display.
There are a few options that can help.</p>
<p>First, you can explicitly <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> the data frame and control the number of rows (<code>n</code>) and the <code>width</code> of the display.
<code>width = Inf</code> will display all columns:</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">nycflights13</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/nycflights13/man/flights.html">flights</a></span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<p>You can also control the default print behaviour by setting options:</p>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/options.html">options(tibble.print_max = n, tibble.print_min = m)</a></code>: if more than <code>n</code> rows, print only <code>m</code> rows.
Use <code><a href="https://rdrr.io/r/base/options.html">options(tibble.print_min = Inf)</a></code> to always show all rows.</p></li>
<li><p>Use <code><a href="https://rdrr.io/r/base/options.html">options(tibble.width = Inf)</a></code> to always print all columns, regardless of the width of the screen.</p></li>
</ul>
<p>You can see a complete list of options by looking at the package help with <code>package?tibble</code>.</p>
<p>A final option is to use RStudio’s built-in data viewer to get a scrollable view of the complete dataset.
This is also often useful at the end of a long chain of manipulations.</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">nycflights13</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/nycflights13/man/flights.html">flights</a></span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="subsetting" class="section level3" number="13.3.2">
<h3>
<span class="header-section-number">13.3.2</span> Subsetting<a class="anchor" aria-label="anchor" href="#subsetting"><i class="fas fa-link"></i></a>
</h3>
<p>So far all the tools you’ve learned have worked with complete data frames.
If you want to pull out a single variable, you need some new tools, <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> and <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code>.
<code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> can extract by name or position; <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> only extracts by name but is a little less typing.</p>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>
  id <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,
  x  <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,
  y  <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">10</span>
<span class="op">)</span>

<span class="co"># Extract by name</span>
<span class="va">df</span><span class="op">$</span><span class="va">x</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="va">df</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>

<span class="co"># Extract by position</span>
<span class="va">df</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; [1] "A" "B" "C" "D" "E"</span></code></pre></div>
<p>To use these in a pipe, you’ll need to use the special placeholder <code>.</code>:</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">%&gt;%</span> <span class="va">.</span><span class="op">$</span><span class="va">x</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="va">df</span> <span class="op">%&gt;%</span> <span class="va">.</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span></code></pre></div>
<p>Alternatively, you can use the <code>pull()</code> function that is specifically designed to extract a variable from a data frame.
<code>pull()</code> also takes an optional <code>name</code> argument that specifies the column to be used as names for a named vector.</p>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="va">df</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">x</span>, name <span class="op">=</span> <span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; A B C D E </span>
<span class="co">#&gt; 1 2 3 4 5</span></code></pre></div>
<p>Compared to a <code>data.frame</code>, tibbles are more strict: they never do partial matching, and they will generate a warning if the column you are trying to access does not exist.</p>
</div>
</div>
<div id="interacting-with-older-code" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Interacting with older code<a class="anchor" aria-label="anchor" href="#interacting-with-older-code"><i class="fas fa-link"></i></a>
</h2>
<p>Some older functions don’t work with tibbles.
If you encounter one of these functions, use <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame()</a></code> to turn a tibble back to a <code>data.frame</code>:</p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p>The main reason that some older functions don’t work with tibble is the <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> function.
We don’t use <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> much in this book because <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select()</a></code> allow you to solve the same problems with clearer code (but you will learn a little about it in <a href="vectors.html#vector-subsetting">vector subsetting</a>).
With base R data frames, <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> sometimes returns a data frame, and sometimes returns a vector.
With tibbles, <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> always returns another tibble.</p>
</div>
<div id="exercises-22" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-22"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>How can you tell if an object is a tibble?
(Hint: try printing <code>mtcars</code>, which is a regular data frame).</p></li>
<li>
<p>Compare and contrast the following operations on a <code>data.frame</code> and equivalent tibble.
What is different?
Why might the default data frame behaviours cause you frustration?</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>abc <span class="op">=</span> <span class="fl">1</span>, xyz <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span>
<span class="va">df</span><span class="op">$</span><span class="va">x</span>
<span class="va">df</span><span class="op">[</span>, <span class="st">"xyz"</span><span class="op">]</span>
<span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"abc"</span>, <span class="st">"xyz"</span><span class="op">)</span><span class="op">]</span></code></pre></div>
</li>
<li><p>If you have the name of a variable stored in an object, e.g. <code>var &lt;- "mpg"</code>, how can you extract the reference variable from a tibble?</p></li>
<li>
<p>Practice referring to non-syntactic names in the following data frame by:</p>
<ol style="list-style-type: lower-alpha">
<li>Extracting the variable called <code>1</code>.</li>
<li>Plotting a scatterplot of <code>1</code> vs <code>2</code>.</li>
<li>Creating a new column called <code>3</code> which is <code>2</code> divided by <code>1</code>.</li>
<li>Renaming the columns to <code>one</code>, <code>two</code> and <code>three</code>.</li>
</ol>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">annoying</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>
  `1` <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,
  `2` <span class="op">=</span> <span class="va">`1`</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">`1`</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</li>
<li><p>What does <code><a href="https://tibble.tidyverse.org/reference/enframe.html">tibble::enframe()</a></code> do?
When might you use it?</p></li>
<li><p>What option controls how many additional column names are printed at the footer of a tibble?</p></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-types-intro.html"><span class="header-section-number">12</span> Introduction</a></div>
<div class="next"><a href="relational-data.html"><span class="header-section-number">14</span> Relational data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tibbles"><span class="header-section-number">13</span> Tibbles</a></li>
<li>
<a class="nav-link" href="#introduction-6"><span class="header-section-number">13.1</span> Introduction</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#prerequisites-6"><span class="header-section-number">13.1.1</span> Prerequisites</a></li></ul>
</li>
<li><a class="nav-link" href="#creating-tibbles"><span class="header-section-number">13.2</span> Creating tibbles</a></li>
<li>
<a class="nav-link" href="#tibbles-vs.-data.frame"><span class="header-section-number">13.3</span> Tibbles vs. data.frame</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#printing"><span class="header-section-number">13.3.1</span> Printing</a></li>
<li><a class="nav-link" href="#subsetting"><span class="header-section-number">13.3.2</span> Subsetting</a></li>
</ul>
</li>
<li><a class="nav-link" href="#interacting-with-older-code"><span class="header-section-number">13.4</span> Interacting with older code</a></li>
<li><a class="nav-link" href="#exercises-22"><span class="header-section-number">13.5</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r4ds/blob/master/tibble.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r4ds/edit/master/tibble.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Data Science (2e)</strong>" was written by Hadley Wickham and Garrett Grolemund. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
